!function(a){a.ratyli=function(b,c){var d=this;d.$el=a(b),d.el=b,d.$el.data("ratyli",d),d.init=function(){d.options=a.extend({},a.ratyli.defaultOptions,c),d.options=a.extend({},d.options,d.$el.data()),d.set(d.options.rate,!0),d.$el.on("click","> *",function(b){if(!d.options.disable){var c=b.target;"SPAN"!=c.tagName&&(c=c.parentNode),d.options.onSignClick.call(d,c);var e=a(c).prevAll().length+1;d.set(e)}}),d.$el.on("mouseenter","> *",function(b){var c=b.target;"SPAN"!=c.tagName&&(c=c.parentNode),d.options.disable||(a(c).addClass("rate-active"),a(c).prevAll().addClass("rate-active")),d.options.onSignEnter.apply(null,[d.options.rate,c])}),d.$el.on("mouseleave","> *",function(b){var c=b.target;"SPAN"!=c.tagName&&(c=c.parentNode),d.options.disable||(a(c).removeClass("rate-active"),a(c).prevAll().removeClass("rate-active")),d.options.onSignLeave.apply(null,[d.options.rate,c])})},d.set=function(a,b){(0>a||a%1!=0||a>d.options.ratemax)&&(a=0),1!=a||1!=d.options.rate||1!=d.options.unrateable||b||(a=0),d.options.rate=a,d.$el.html(""),0!=d.options.rate&&d.$el.attr("data-rate",d.options.rate),d.$el.attr("data-ratemax",d.options.ratemax);for(var c=0;c<d.options.ratemax;){var e="";e=c<d.options.rate?d.signTemplate("full"):d.signTemplate("empty"),d.$el.append(e),c++}return b||d.options.disable||(d.$el.addClass("rated"),d.$el.attr("data-rate",a)),d.options.onRated.call(d,a,b),d.options.rate},d.signTemplate=function(a){return"<span class='rate rate-"+a+"' style='cursor:"+d.options.cursor+";'>"+d.options[a]+"</span>"},d.init()},a.ratyli.defaultOptions={disable:!1,unrateable:!1,full:"★",empty:"☆",cursor:"default",rate:0,ratemax:5,onSignEnter:function(){},onSignLeave:function(){},onSignClick:function(){},onRated:function(){}},a.fn.ratyli=function(b){return this.each(function(){new a.ratyli(this,b)})}}(jQuery);